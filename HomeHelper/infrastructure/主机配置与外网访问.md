# 主机配置
### 服务器版（性能第一外观第二）
| 配件     | 型号                                 | 价格 ¥      |
|--------|------------------------------------|-----------|
| 板U     | TUF Z790-PLUS WIFI D5  + i9 13900K | 6129      |
| 显卡     | ROG-STRIX-RTX4090-O24G             | 16979     |
| 固态     | 致态 Ti Pro 7000 1TB                 | 599       |
| 内存     | 宏碁 掠夺者 DDR5 6800 32G(16*2)         | 939       |
| 散热     | 先马XW360D一体式标配风扇                    | 629       |
| 电源     | 先马XP 1200W ATX3.0 白金牌              | 839       |
| 机箱     | 联力 包豪斯 O11D                        | 799       |
| 风扇     | 乔思伯 zg120b x3 x2                   | 318       |
| **总计** |                                    | **27231** |

主要用于跑模型

Tips：
   - 建议ATX3.0电源
   - 先确定水冷或者风冷长度，120or240or360
   - 切记要看机箱各侧支持的风扇或水冷长度以免装不下，也要看是否支持ATX电源

# 外网访问(通过ssh)
以下为本人方案，不唯一

1. 公网IP
   - 原本家中是200M的移动宽带，也是免费的，后来联通一直打电话说因为我每月的套餐使用情况可以送300M，下行50M（如果没记错）。另外主要是移动不给公网IP，联通申请就给，于是果断换成联通宽带
   - 打电话给客服申请宽带，大概第二天就有安装师傅联系约时间上门，上门后安装过程很快大概半小时，实测上下行带宽没啥问题
   - 安装好之后再电话客服申请公网IP，差不多也是一天内就换成公网IP了，换成公网IP后测试没问题
2. 光猫桥接
   - 由于运营商提供的光猫能力有限，为了能进行内网端口转发，需要再申请将光猫由<u>路由模式</u>改成<u>桥接模式</u>(建议这次申请直接联系安装师傅，不然这次工单会被归为投诉单，师傅会被扣钱)
   - 光猫变成桥接模式后WAN口连自己的路由器，就可以对自己的路由器配置了
3. DDNS服务
   - 需要注意的是营商提供的公网IP并非严格意义上的静态公网IP（毕竟IPv4早就分配完了），这里是一个动态的公网IP，意味着只要路由器不断电不重启不出故障啥的，公网IP就不变，否则每次重启路由器之后会分配一个新的公网IP
   - 虽然大概率不会重启路由器，但仍然有不稳定风险，于是需要动态DNS服务，即主动实时地告诉网络供应商的DNS你的新公网IP，相当于动态绑定自己的域名和自己的公网IP，这样一来无论家里公网IP如何变化，域名还是能够解析到自己家中
   - DDNS服务的方案有很多，比如可以用第三方提供的服务如花生壳等，还配套送域名，但本人不喜欢这种方式，不想麻烦又想自己控制，所以自己搭建
   - 自己的域名是在腾讯云上注册的，阿里也行，但其他第三方不推荐，原因是这两家是有dns配置管理，并且有SDK提供接口进行配置
   - 这样就可以电脑上写一个ddns服务的脚本，代码参考官方文档，检测当前IP（这里请求一些IP检测网站即可获得，如ip.cn），如果与之前记录的有变化就SDK接口把新IP更新给DNS服务商，然后用crontab设置每天或者一定时间间隔的定时任务即可
4. 端口转发
   - 家里用的是小米的路由器（打算后面再升级），在路由器管理中支持端口转发，把外网请求端口（默认22）映射到家里主机的22端口即可
   - 目前遇到一个问题是，在家里连接wifi访问我的域名能够解析到家里公网IP，能够访问到路由器管理页面，但使用外部网络则无法访问到，但ping我的域名能够解析到公网IP......：）
   - 问题已解决，开启小米路由器的DMZ直接把某台主机映射到公网IP上，缺点是暴露了所有端口，不安全。开启ufw，只对提供外网服务的端口进行暴露。



2023.6
